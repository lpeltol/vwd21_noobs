{"version":3,"sources":["components/duckHandler/DuckHandler.js","sounds/shoot.mp3","components/duckHandler/duckDead.png","components/duckHandler/duckUp.png","components/duckHandler/duckDown.png","sounds/reload.wav","drawUtils/draw.js","drawUtils/drawBackground.js","drawUtils/drawScoreboard.js","components/WebCam/WebCam.js","App.js","index.js"],"names":["SIZE","DuckHandler","size","this","DUCKS","escapeCount","killCount","pr","Math","random","push","Duck","ctx","forEach","duck","draw","updatePosition","index","y","height","splice","x","CreateShootingSound","width","dead","Audio","shoot","play","side","StartSide","randomNumber","floor","pose","xSpeed","ySpeed","counter","color","toString","save","beginPath","translate","img","Image","src","drawImage","flipImage","restore","scale","min","max","bullet","VIDEOSIZE","GAMESIZE","model","InitializeDucks","document","getElementById","style","display","video","videoCanvas","videoCtx","getContext","gameCanvas","gameCtx","intervalId","setInterval","drawScene","videoWidth","videoHeight","sx","sy","clearRect","imgData","getImageData","fillStyle","rect","fill","detect","then","predictions","undefined","bbox","ratio","KillDuck","reload","drawCrosshair","CreateNewDuck","DrawDucksAndUpdate","DeleteDucks","clearInterval","innerHTML","score","lives","livesLeft","font","fillText","drawScoreboard","r","moveTo","arc","PI","lineTo","lineWidth","strokeStyle","stroke","WebCam","useState","setVideo","setModel","useEffect","handpose","flipHorizontal","imageScaleFactor","maxNumBoxes","iouThreshold","scoreThreshold","querySelector","navigator","mediaDevices","getUserMedia","stream","srcObject","catch","error","console","log","StreamVideo","id","className","Fragment","autoPlay","onClick","margin","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.4284f4ff.chunk.js","sourcesContent":["import duckDown from './duckDown.png'\r\nimport duckUp from './duckUp.png'\r\nimport duckDead from './duckDead.png'\r\n\r\nimport shoot from '../../sounds/shoot.mp3'\r\n\r\nvar SIZE;\r\n\r\n// class to handle all duck related things\r\nexport default class DuckHandler {\r\n\r\n    // Initialize the variables\r\n    static InitializeDucks(size) {\r\n        this.DUCKS = []; // Contains all the ducks\r\n        this.escapeCount = 0; // Keeps count how many ducks have escaped from the frame\r\n        this.killCount = 0; // Keeps count how many the player has managed to shoot.\r\n        SIZE = size;\r\n        \r\n    }\r\n\r\n    // Create new duck with pr% chance per frame.\r\n    static CreateNewDuck(pr) {\r\n        var ran = Math.random();\r\n        if (ran > (1 - pr)) {\r\n            this.DUCKS.push(new Duck());\r\n        }\r\n    }\r\n\r\n    // Draw all ducks and update positions\r\n    static DrawDucksAndUpdate(ctx) {\r\n        this.DUCKS.forEach(duck => {\r\n            duck.draw(ctx);\r\n            duck.updatePosition();\r\n        });\r\n    }\r\n\r\n    // Delete ducks which have flown away.\r\n    static DeleteDucks() {\r\n        this.DUCKS.forEach((duck, index) => {\r\n            if (duck.y < 0 - duck.height) {\r\n                this.DUCKS.splice(index, 1);\r\n                this.escapeCount += 1;\r\n            }\r\n        });\r\n    }\r\n\r\n    // Mark duck ded if shot\r\n    static KillDuck(x, y) {\r\n\r\n        this.CreateShootingSound();\r\n\r\n        this.DUCKS.forEach(duck => {\r\n            if (x > duck.x && x < duck.x + duck.width && y > duck.y && y < duck.y + duck.height) {\r\n                duck.dead = true;\r\n                this.killCount += 1;\r\n            }\r\n        })\r\n    }\r\n\r\n    // Create epic sound to indicate shots fired.\r\n    static CreateShootingSound() {\r\n        var shootSound = new Audio(shoot)\r\n        shootSound.play();\r\n    }\r\n\r\n}\r\n\r\n// Class for duck\r\nclass Duck {\r\n\r\n    // Constructor for the bird\r\n    constructor() {\r\n        this.side = this.StartSide();\r\n        this.dead = false;\r\n        this.x = (!this.side) ? -100 : SIZE + 100;\r\n        this.y = this.randomNumber(Math.floor(SIZE * 0.8), SIZE)\r\n        this.pose = false;\r\n        this.xSpeed = (!this.side) ? 0.5 : -0.5;\r\n        //this.ySpeed = -this.randomNumber(1, 2);\r\n        this.ySpeed = -0.5;\r\n        this.counter = 0;\r\n        this.width = this.randomNumber(5, 100);\r\n        this.height = this.randomNumber(5, 100);\r\n        this.color = \"#\" + ((1 << 24) * Math.random() | 0).toString(16);\r\n    }\r\n\r\n    // Function to draw bird\r\n    draw(ctx) {\r\n\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.translate(this.x, this.y)\r\n\r\n       \r\n        // If duck not ded\r\n        if (!this.dead) {\r\n\r\n            // Draw duck with wings up\r\n            if (this.pose) {\r\n                const img = new Image();\r\n                //img.src = \"./duckUp.png\";\r\n                img.src = duckUp;\r\n\r\n                this.width = img.width;\r\n                this.height = img.height;\r\n\r\n                // Draw duck coming from left\r\n                if (!this.side) {\r\n                    ctx.drawImage(img, 0, 0);\r\n                }\r\n\r\n                // Draw duck coming from right\r\n                else {\r\n                    this.flipImage(img, 0, 0, ctx);\r\n                }\r\n\r\n                // Draw 10 frames with wings up and down\r\n                if (this.counter == 10) {\r\n                    this.pose = false;\r\n                    this.counter = 0;\r\n                }\r\n            }\r\n\r\n            // Draw duck with wings down.\r\n            else {\r\n                const img = new Image();\r\n                //img.src = \"duckDown.png\";\r\n                img.src = duckDown;\r\n\r\n                this.width = img.width;\r\n                this.height = img.height;\r\n\r\n                if (!this.side) {\r\n                    ctx.drawImage(img, 0, 0);\r\n                }\r\n                else {\r\n                    this.flipImage(img, 0, 0, ctx);\r\n                }\r\n                if (this.counter == 10) {\r\n                    this.pose = true;\r\n                    this.counter = 0;\r\n                }\r\n            }\r\n            this.counter += 1;\r\n        }\r\n        // If duck ded\r\n        else {\r\n            const img = new Image();\r\n            img.src = duckDead;\r\n\r\n            this.width = img.width;\r\n            this.height = img.height;\r\n            ctx.drawImage(img, 0, 0);\r\n        }\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n    // Function to update the birds position\r\n    updatePosition() {\r\n\r\n        this.x += this.xSpeed;\r\n        this.y += this.ySpeed;\r\n\r\n        // Drop bird if he ded\r\n        if (this.dead === true) {\r\n            this.xSpeed = 0;\r\n            this.ySpeed = 5;\r\n\r\n            // Stop when hit ground\r\n            if (this.y >= SIZE * 0.8) {\r\n                this.ySpeed = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Function to draw image flipped. https://stackoverflow.com/questions/35973441/how-to-horizontally-flip-an-image\r\n    flipImage(img, x, y, ctx) {\r\n        ctx.save();\r\n        ctx.translate(x + img.width, y);\r\n        ctx.scale(-1, 1);\r\n        ctx.drawImage(img, 0, 0);\r\n        //ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n        ctx.restore();\r\n    }\r\n\r\n    // Function to randomize the side the bird comes from\r\n    StartSide() {\r\n\r\n        var i = Math.random();\r\n\r\n        if (i < 0.5) {\r\n            // Left side\r\n            return false;\r\n        }\r\n        else {\r\n            // Right side\r\n            return true;\r\n        }\r\n    }\r\n\r\n    // Function to return random number between min and max\r\n    randomNumber(min, max) {\r\n        return Math.random() * (max - min) + min;\r\n    }\r\n\r\n}","export default __webpack_public_path__ + \"static/media/shoot.f17b2b99.mp3\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAArCAYAAADMr156AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5QIMDQwRdJYw5AAAAkFJREFUaN7tmlFOwzAMhu0pz+MYXACxR17pHcZZgLO0dxivPA5xAY4BFzBPFp6JG6dNum5KpEqbmnbL19+/7WxIRNAGwKYhaCAaiNgINW+OiCcGRES4VhBYyywZQt8NAADwdNjDmqFUAaEh6MFQ1gSjOIgxJUgwa4NRxSw1hIfHTxOK9pGryxoagoTB59YEY1MjLHjw4uV7rY4qMD5u6OyKsAxyDJDnGjeACRCqgJA+8P52555bfGQCKQpCZoDUU44ZqAyxsaOkEhapLFkVOhQkDK0aTw3Cc+i4Tavi/hvPBuLpsIe+G6Dvhiz5IyKllCTP424PdNwC7n5m1yPFQRARavlaqtBqsMpxC0TfDTC8APTdn5KmAlmkxNY1hQQh58jXHnBjAHOBbHIX6Dl0ViiVHrkOkYf+nKl1Sch5wt5FWdIeM86psGKGy96EiORVRjI0Ui7uAWJJfqzOsIBZ4eLxl7GQiYKwZDUVRir256RmqYAUQJ4fgxFiAOj59j+c16/VbKJIJXkhyDCKZZjggVBrETVafW+fw0AYxokiakMo1lwZrf4ckw1LSrpkk8VQ53oOqyJoH6ihihpdZuqeuSEYdGnsNcVYatTyr9pmG5VqTmUps6O7xI41RNbG7BIQcmqE7NAoKXVOa7Em7NyLj10fpkLICQH5ZadCqb3tnxUaqQ2TNf9uUaz75AVZTz8G6FIgZLfhRIREhKlQOIdRLhYa3rb80kKiyA6VZXyXBmE2iGsa7R8zDUQD0UA0EA2Ef/wCr4y328vyzCsAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAArCAYAAADMr156AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5QIMDDEdFgpeRgAAAidJREFUaN7tmsFxAjEMRa2Mz0kZNLATjlwhNUAtDLVAaoArx2RogDJCA85JGa3XXku2wWxGPjFe1lhP0pfsAZxzRocxL4pAQSiI0LCtNwAAA5FyzsHD99FSLBHCfnX4m9sc101gNAFBo4BCaAmjWWqEooA+8+dS6VQKrrlGoMGL5cUYY8z51InTCdfBZzlAnqJqIAQfju/5GAScC81PtnwilJhRKWP3q4MBABdLn8n3ESnDqKYgLAkM29KAMUHkRgNdAz9jmkjWt4/yGFcfcgZtAQAgXyNyjcBczH1fCjlRUuv0EQDgOGWHGu17M1X6avYeNSKV2mul4R0L5VoQYuukIMQ6ZLedhQHtrj3n25r5KhUoThU4fHw6htfFUeO2MwO7az81nHNQkufUi6mNSEBxjCppoqJV43zqxFGBEHBDXENrRU62AJNo6IHAqEDDOEAoBGoYF2ZMDxbLy12FFyFExRIfIJAxg0IQpNEU+n6NvmLM87FDWfQ+IqUZfiqURoG/xvnUDX4jRw+4dxuWU2NTJz+pF1OtcmxOAoS+y+mP2C02asjmuB5sJEdkcbN0La4ucIVWci8hOmtQGP7hJmQEF47Ue3cR0Nw7y7FUSXktVGpbASgG0TujfL0amN9EYuaDmg6I77d0qzu/JTu+Vtf1dSMiBuP9BySl99kglF/MeACe2VDWxUyp4f9h2JqRMOUB+keRnNRQEApCQSgIBaEgdCgIBTEYv/jJUlwFx0BaAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAArCAYAAADMr156AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5QIMDDAUds3XowAAAl9JREFUaN7tms1twzAMhU3D53SMLGAkx16bHdJZgsyS7BBffUzRBTJGugB7KJjSCvVDS4ptQAKCAjWqiB/foyi5gIhVGVVVFwQFRAFRQBQQBUTwaJa4aAAQ93xEhNFzLq2PIAin3Xnw+8/LPgrIokDYIJhAxoBYXI1wQaDnAIA2+ywehC8wbg2CpYGR3RrazNh8DgAoqYEDMEFobNJMHXDIfL5geDIBxm0cdUwQ5MXUEGxQpOzHAnhSBABgiIx40O8f34NnfddOWii1SuXxNlp5m8HPBYKt1uFhLQM63gbJb0KC1CzWJd+xwfvm5LYIVQ0e1hUcb0NrICLE+JyrYYx8X20X767Rd61aFQQhNHtTBGmzhgiCVEGBhQDhEDiAWIvlrjkEwVos6QEBcQUkQUgBIHfmbX2JtbP01QzTCqEQXJnmc/Rd+/QdY6xCf+trDRpNi2tbjFYJoa3y52VfnXbnh+o0QLTH8uAWm2oILS62yPJAbeqwqSe0IGuO46rTJ00sZafv2qdPiiGpABEh5POSixnfJYkra9z7vmIrbc8xV3LJT598h8HrqoLtzwCKz8cmKJu1JIuEnovygPh6ky9Mr6vHT9juvSB4Fdd0s2bhnE4RmzvYYFSbO/wF958x12KlbLoKrqtwphpxV3WbOxAEM1BNEeMFN9ROqe9AanXgEx2euFpynEHqlEqI2R41Z4wcNaIeBSHR4H2J1JO4AKXeNSa/zpdgmDXD7CWyHM7m8qZLatCkdxWhh6jFgtB0qzk6y9m9+zS3xdxKmC0IF5RcEGYP4pWj/MdMAVFAiOMXDSXZ3blbU9UAAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/reload.29125f95.wav\";","import DuckHandler from \"../components/duckHandler/DuckHandler\";\r\nimport { drawBackground } from \"./drawBackground\";\r\nimport { drawScoreboard } from \"./drawScoreboard\";\r\nimport reload from '../sounds/reload.wav'\r\n\r\nlet bullet = true;\r\nlet shots = [];\r\nlet lives = 10;\r\nconst VIDEOSIZE = 150;\r\nconst GAMESIZE = 600;\r\nlet counter = 0;\r\nlet x = 0.5;\r\nlet y = 0.5;\r\n\r\nexport const draw = (model) => {\r\n  DuckHandler.InitializeDucks(GAMESIZE);\r\n  let startButton = document.getElementById(\"startButton\");\r\n  startButton.style.display = \"none\";\r\n  let scoreboard = document.getElementById(\"scoreboard\");\r\n  scoreboard.style.display = \"none\";\r\n  var video = document.getElementById(\"video\");\r\n\r\n  var videoCanvas = document.getElementById(\"videoCanvas\");\r\n  videoCanvas.height = VIDEOSIZE;\r\n  videoCanvas.width = VIDEOSIZE;\r\n  var videoCtx = videoCanvas.getContext(\"2d\");\r\n\r\n  var gameCanvas = document.getElementById(\"gameCanvas\");\r\n  gameCanvas.height = GAMESIZE;\r\n  gameCanvas.width = GAMESIZE;\r\n  var gameCtx = gameCanvas.getContext(\"2d\");\r\n\r\n  let intervalId = setInterval(function () {\r\n    drawScene(videoCtx, gameCtx, video, model, intervalId);\r\n  }, 10);\r\n};\r\n\r\nconst drawScene = (videoCtx, gameCtx, video, model, intervalId) => {\r\n  counter += 1;\r\n  var min = Math.min(video.videoWidth, video.videoHeight);\r\n  var sx = (video.videoWidth - min) / 2;\r\n  var sy = (video.videoHeight - min) / 2;\r\n\r\n  videoCtx.save();\r\n  videoCtx.beginPath();\r\n  videoCtx.clearRect(0, 0, VIDEOSIZE, VIDEOSIZE);\r\n  videoCtx.drawImage(video, sx, sy, min, min, 0, 0, VIDEOSIZE, VIDEOSIZE);\r\n  videoCtx.restore();\r\n\r\n  var imgData = videoCtx.getImageData(0, 0, VIDEOSIZE, VIDEOSIZE);\r\n\r\n  drawBackground(GAMESIZE, GAMESIZE, gameCtx);\r\n\r\n  // HANDTRACK\r\n  if (counter === 5) {\r\n    model.detect(imgData).then((predictions) => {\r\n      if (predictions?.[0]?.bbox != undefined) {\r\n        x = (predictions[0].bbox[0] + predictions[0].bbox[2] / 2) / VIDEOSIZE;\r\n        y = (predictions[0].bbox[1] + predictions[0].bbox[3] / 2) / VIDEOSIZE;\r\n\r\n        var ratio = predictions[0].bbox[2] / predictions[0].bbox[3];\r\n\r\n        var x1 = x - 0.5;\r\n        var y1 = y - 0.5;\r\n        var a = 2;\r\n        x = x + x1 / a;\r\n        y = y + y1 / a;\r\n\r\n        if (ratio >= 0.7 && bullet === true) {\r\n          DuckHandler.CreateShootingSound();\r\n          DuckHandler.KillDuck(x * GAMESIZE, y * GAMESIZE);\r\n          bullet = false;\r\n        }\r\n\r\n        if (ratio <= 0.6 && bullet === false) {\r\n          var reloadSound = new Audio(reload);\r\n          reloadSound.play();\r\n          bullet = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    counter = 0;\r\n  }\r\n  drawCrosshair(gameCtx, x, y, GAMESIZE);\r\n\r\n  DuckHandler.CreateNewDuck(0.005);\r\n  DuckHandler.DrawDucksAndUpdate(gameCtx);\r\n  DuckHandler.DeleteDucks();\r\n  let escapedDucks = DuckHandler.escapeCount;\r\n  if (escapedDucks === lives) {\r\n    clearInterval(intervalId);\r\n    let scoreboard = document.getElementById(\"scoreboard\");\r\n    scoreboard.style.display = \"block\";\r\n    document.getElementById(\r\n      \"score\"\r\n    ).innerHTML = `Congratulations! You managed to hunt down ${DuckHandler.killCount} duck(s)!`;\r\n  }\r\n  drawScoreboard(\r\n    gameCtx,\r\n    bullet,\r\n    DuckHandler.killCount,\r\n    lives,\r\n    DuckHandler.escapeCount\r\n  );\r\n};\r\n\r\nconst drawCrosshair = (ctx, x, y, SIZE) => {\r\n  var r = SIZE * 0.05;\r\n\r\n  ctx.save();\r\n  ctx.beginPath();\r\n\r\n  ctx.translate(Math.floor(x * GAMESIZE), Math.floor(y * GAMESIZE));\r\n\r\n  // Circle\r\n  ctx.moveTo(0, 0);\r\n  ctx.arc(0, 0, r, 0, Math.PI * 2);\r\n\r\n  // Vertical line\r\n  ctx.moveTo(0, 0 - r);\r\n  ctx.lineTo(0, 0 + r);\r\n\r\n  // Horizontal line\r\n  ctx.moveTo(0 - r, 0);\r\n  ctx.lineTo(0 + r, 0);\r\n\r\n  ctx.lineWidth = 1;\r\n  ctx.strokeStyle = \"red\";\r\n  ctx.stroke();\r\n  ctx.restore();\r\n};\r\n\r\nconst drawBoundingBox = (ctx, x, y, w, h) => {\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  ctx.rect(x, y, w, -h);\r\n  ctx.stroke();\r\n  ctx.restore();\r\n};\r\n","export const drawBackground = (width, height, ctx) => {\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  ctx.fillStyle = \"skyblue\";\r\n  ctx.rect(0, 0, width, height * 0.75);\r\n  ctx.fill();\r\n  ctx.restore();\r\n\r\n  ctx.save();\r\n  ctx.beginPath();\r\n  ctx.fillStyle = \"green\";\r\n  ctx.rect(0, height * 0.75, width, height * 0.25);\r\n  ctx.fill();\r\n  ctx.restore();\r\n};\r\n","export const drawScoreboard = (ctx, bullet, score, lives, livesLeft) => {\r\n  ctx.save();\r\n  ctx.scale(1, 1);\r\n  ctx.font = \"500 18px Verdana\";\r\n  ctx.fillStyle = \"white\";\r\n  ctx.fillText(`BULLETS: ${bullet ? \"1\" : \"0\"}`, 5, 550);\r\n  ctx.fillText(`SCORE: ${score ? score : \"0\"}`, 5, 570);\r\n  ctx.fillText(`LIVES: ${livesLeft ? lives - livesLeft : lives}`, 5, 590);\r\n  ctx.restore();\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport * as handpose from \"handtrackjs\";\r\nimport PulseLoader from \"react-spinners/PulseLoader\";\r\nimport { draw } from \"../../drawUtils/draw\";\r\nimport \"./WebCam.css\";\r\n\r\nconst SIZE = 500;\r\n\r\nconst StreamVideo = () => {\r\n  var video = document.querySelector(\"#video\");\r\n  video.width = SIZE;\r\n  video.height = SIZE;\r\n\r\n  if (navigator.mediaDevices.getUserMedia) {\r\n    //console.log(navigator.mediaDevices.getUserMedia);\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true })\r\n      .then(function (stream) {\r\n        video.srcObject = stream;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"Something went wrong!\");\r\n      });\r\n  }\r\n\r\n  return video;\r\n};\r\n\r\nexport const WebCam = () => {\r\n  const [video, setVideo] = useState({});\r\n  const [model, setModel] = useState(undefined);\r\n\r\n  useEffect(() => {\r\n    const modelParams = {\r\n      flipHorizontal: true, // flip e.g for video\r\n      imageScaleFactor: 1, // reduce input image size .\r\n      maxNumBoxes: 1, // maximum number of boxes to detect\r\n      iouThreshold: 0.5, // ioU threshold for non-max suppression\r\n      scoreThreshold: 0.85, // confidence threshold for predictions.\r\n    };\r\n\r\n    handpose.load(modelParams).then((model) => {\r\n      setModel(model);\r\n      setVideo(StreamVideo());\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"container\" className={\"GameContainer\"}>\r\n      {model ? (\r\n        <React.Fragment>\r\n          <video autoPlay={true} id=\"video\"></video>\r\n          <button\r\n            onClick={() => draw(model)}\r\n            className=\"startButton\"\r\n            id=\"startButton\"\r\n          >\r\n            Start game\r\n          </button>\r\n          <div className=\"canvasWrapper\">\r\n            <div className=\"scoreboard\" id=\"scoreboard\">\r\n              <span className=\"gameOverText\">GAME OVER!</span>\r\n              <p id=\"score\"></p>\r\n              <button\r\n                onClick={() => draw(model)}\r\n                className=\"playAgainButton\"\r\n                id=\"playAgainButton\"\r\n              >\r\n                Play again!\r\n              </button>\r\n            </div>\r\n            <canvas id=\"videoCanvas\" />\r\n            <canvas id=\"gameCanvas\" />\r\n          </div>\r\n        </React.Fragment>\r\n      ) : (\r\n        <React.Fragment>\r\n          <span className={\"LoadingSpan\"}>Game is initializing</span>\r\n          <PulseLoader size={20} margin={15} />\r\n        </React.Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import \"./App.css\";\r\nimport { WebCam } from \"./components/WebCam/WebCam\"\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <WebCam />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}