(this.webpackJsonpvwd21_noobs=this.webpackJsonpvwd21_noobs||[]).push([[0],{117:function(e,t,i){},118:function(e,t,i){},119:function(e,t,i){},126:function(e,t){},128:function(e,t){},139:function(e,t){},141:function(e,t){},166:function(e,t){},168:function(e,t){},169:function(e,t){},174:function(e,t){},176:function(e,t){},195:function(e,t){},207:function(e,t){},210:function(e,t){},213:function(e,t,i){"use strict";i.r(t);var n,a=i(3),o=i(12),A=i.n(o),s=i(110),c=i.n(s),r=(i(117),i(118),i(20)),h=(i(119),i(29)),d=i(30),u=function(){function e(){Object(h.a)(this,e)}return Object(d.a)(e,null,[{key:"InitializeDucks",value:function(e){this.DUCKS=[],this.escapeCount=0,this.killCount=0,n=e}},{key:"CreateNewDuck",value:function(e){Math.random()>1-e&&this.DUCKS.push(new l)}},{key:"DrawDucksAndUpdate",value:function(e){this.DUCKS.forEach((function(t){t.draw(e),t.updatePosition()}))}},{key:"DeleteDucks",value:function(){var e=this;this.DUCKS.forEach((function(t,i){t.y<0-t.height&&(e.DUCKS.splice(i,1),e.escapeCount+=1)}))}},{key:"KillDuck",value:function(e,t){var i=this;this.CreateShootingSound(),this.DUCKS.forEach((function(n){e>n.x&&e<n.x+n.width&&t>n.y&&t<n.y+n.height&&(n.dead=!0,i.killCount+=1)}))}},{key:"CreateShootingSound",value:function(){var e=200,t=new AudioContext,i=t.createOscillator(),n=t.createGain();i.connect(n),n.connect(t.destination),i.frequency.value=1e3,i.type="sine",n.gain.setValueAtTime(0,t.currentTime),n.gain.linearRampToValueAtTime(.5,t.currentTime+.1),i.frequency.linearRampToValueAtTime(200,t.currentTime+.2),i.start(t.currentTime),n.gain.exponentialRampToValueAtTime(.001,t.currentTime+.2),i.stop(t.currentTime+.2),setTimeout((function(){i.disconnect()}),e)}}]),e}(),l=function(){function e(){Object(h.a)(this,e),this.side=this.StartSide(),this.dead=!1,this.x=this.side?n+100:-100,this.y=this.randomNumber(Math.floor(.8*n),n),this.pose=!1,this.xSpeed=this.side?-.5:.5,this.ySpeed=-.5,this.counter=0,this.width=this.randomNumber(5,100),this.height=this.randomNumber(5,100),this.color="#"+((1<<24)*Math.random()|0).toString(16)}return Object(d.a)(e,[{key:"draw",value:function(e){if(e.save(),e.beginPath(),e.translate(this.x,this.y),this.dead){var t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAArCAYAAADMr156AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5QIMDQwRdJYw5AAAAkFJREFUaN7tmlFOwzAMhu0pz+MYXACxR17pHcZZgLO0dxivPA5xAY4BFzBPFp6JG6dNum5KpEqbmnbL19+/7WxIRNAGwKYhaCAaiNgINW+OiCcGRES4VhBYyywZQt8NAADwdNjDmqFUAaEh6MFQ1gSjOIgxJUgwa4NRxSw1hIfHTxOK9pGryxoagoTB59YEY1MjLHjw4uV7rY4qMD5u6OyKsAxyDJDnGjeACRCqgJA+8P52555bfGQCKQpCZoDUU44ZqAyxsaOkEhapLFkVOhQkDK0aTw3Cc+i4Tavi/hvPBuLpsIe+G6Dvhiz5IyKllCTP424PdNwC7n5m1yPFQRARavlaqtBqsMpxC0TfDTC8APTdn5KmAlmkxNY1hQQh58jXHnBjAHOBbHIX6Dl0ViiVHrkOkYf+nKl1Sch5wt5FWdIeM86psGKGy96EiORVRjI0Ui7uAWJJfqzOsIBZ4eLxl7GQiYKwZDUVRir256RmqYAUQJ4fgxFiAOj59j+c16/VbKJIJXkhyDCKZZjggVBrETVafW+fw0AYxokiakMo1lwZrf4ckw1LSrpkk8VQ53oOqyJoH6ihihpdZuqeuSEYdGnsNcVYatTyr9pmG5VqTmUps6O7xI41RNbG7BIQcmqE7NAoKXVOa7Em7NyLj10fpkLICQH5ZadCqb3tnxUaqQ2TNf9uUaz75AVZTz8G6FIgZLfhRIREhKlQOIdRLhYa3rb80kKiyA6VZXyXBmE2iGsa7R8zDUQD0UA0EA2Ef/wCr4y328vyzCsAAAAASUVORK5CYII=",this.width=t.width,this.height=t.height,e.drawImage(t,0,0)}else{if(this.pose){var i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAArCAYAAADMr156AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5QIMDDEdFgpeRgAAAidJREFUaN7tmsFxAjEMRa2Mz0kZNLATjlwhNUAtDLVAaoArx2RogDJCA85JGa3XXku2wWxGPjFe1lhP0pfsAZxzRocxL4pAQSiI0LCtNwAAA5FyzsHD99FSLBHCfnX4m9sc101gNAFBo4BCaAmjWWqEooA+8+dS6VQKrrlGoMGL5cUYY8z51InTCdfBZzlAnqJqIAQfju/5GAScC81PtnwilJhRKWP3q4MBABdLn8n3ESnDqKYgLAkM29KAMUHkRgNdAz9jmkjWt4/yGFcfcgZtAQAgXyNyjcBczH1fCjlRUuv0EQDgOGWHGu17M1X6avYeNSKV2mul4R0L5VoQYuukIMQ6ZLedhQHtrj3n25r5KhUoThU4fHw6htfFUeO2MwO7az81nHNQkufUi6mNSEBxjCppoqJV43zqxFGBEHBDXENrRU62AJNo6IHAqEDDOEAoBGoYF2ZMDxbLy12FFyFExRIfIJAxg0IQpNEU+n6NvmLM87FDWfQ+IqUZfiqURoG/xvnUDX4jRw+4dxuWU2NTJz+pF1OtcmxOAoS+y+mP2C02asjmuB5sJEdkcbN0La4ucIVWci8hOmtQGP7hJmQEF47Ue3cR0Nw7y7FUSXktVGpbASgG0TujfL0amN9EYuaDmg6I77d0qzu/JTu+Vtf1dSMiBuP9BySl99kglF/MeACe2VDWxUyp4f9h2JqRMOUB+keRnNRQEApCQSgIBaEgdCgIBTEYv/jJUlwFx0BaAAAAAElFTkSuQmCC",this.width=i.width,this.height=i.height,this.side?this.flipImage(i,0,0,e):e.drawImage(i,0,0),10==this.counter&&(this.pose=!1,this.counter=0)}else{var n=new Image;n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAArCAYAAADMr156AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAABJ0AAASdAHeZh94AAAAB3RJTUUH5QIMDDAUds3XowAAAl9JREFUaN7tms1twzAMhU3D53SMLGAkx16bHdJZgsyS7BBffUzRBTJGugB7KJjSCvVDS4ptQAKCAjWqiB/foyi5gIhVGVVVFwQFRAFRQBQQBUTwaJa4aAAQ93xEhNFzLq2PIAin3Xnw+8/LPgrIokDYIJhAxoBYXI1wQaDnAIA2+ywehC8wbg2CpYGR3RrazNh8DgAoqYEDMEFobNJMHXDIfL5geDIBxm0cdUwQ5MXUEGxQpOzHAnhSBABgiIx40O8f34NnfddOWii1SuXxNlp5m8HPBYKt1uFhLQM63gbJb0KC1CzWJd+xwfvm5LYIVQ0e1hUcb0NrICLE+JyrYYx8X20X767Rd61aFQQhNHtTBGmzhgiCVEGBhQDhEDiAWIvlrjkEwVos6QEBcQUkQUgBIHfmbX2JtbP01QzTCqEQXJnmc/Rd+/QdY6xCf+trDRpNi2tbjFYJoa3y52VfnXbnh+o0QLTH8uAWm2oILS62yPJAbeqwqSe0IGuO46rTJ00sZafv2qdPiiGpABEh5POSixnfJYkra9z7vmIrbc8xV3LJT598h8HrqoLtzwCKz8cmKJu1JIuEnovygPh6ky9Mr6vHT9juvSB4Fdd0s2bhnE4RmzvYYFSbO/wF958x12KlbLoKrqtwphpxV3WbOxAEM1BNEeMFN9ROqe9AanXgEx2euFpynEHqlEqI2R41Z4wcNaIeBSHR4H2J1JO4AKXeNSa/zpdgmDXD7CWyHM7m8qZLatCkdxWhh6jFgtB0qzk6y9m9+zS3xdxKmC0IF5RcEGYP4pWj/MdMAVFAiOMXDSXZ3blbU9UAAAAASUVORK5CYII=",this.width=n.width,this.height=n.height,this.side?this.flipImage(n,0,0,e):e.drawImage(n,0,0),10==this.counter&&(this.pose=!0,this.counter=0)}this.counter+=1}e.restore()}},{key:"updatePosition",value:function(){this.x+=this.xSpeed,this.y+=this.ySpeed,!0===this.dead&&(this.xSpeed=0,this.ySpeed=5,this.y>=.8*n&&(this.ySpeed=0))}},{key:"flipImage",value:function(e,t,i,n){n.save(),n.translate(t+e.width,i),n.scale(-1,1),n.drawImage(e,0,0),n.restore()}},{key:"StartSide",value:function(){return!(Math.random()<.5)}},{key:"randomNumber",value:function(e,t){return Math.random()*(t-e)+e}}]),e}(),m=!0,g=150,f=600,v=0,b=.5,x=.5,p=function(e){u.InitializeDucks(f),document.getElementById("startButton").style.display="none",document.getElementById("scoreboard").style.display="none";var t=document.getElementById("video"),i=document.getElementById("videoCanvas");i.height=g,i.width=g;var n=i.getContext("2d"),a=document.getElementById("gameCanvas");a.height=f,a.width=f;var o=a.getContext("2d"),A=setInterval((function(){I(n,o,t,e,A)}),10)},I=function(e,t,i,n,a){v+=1;var o=Math.min(i.videoWidth,i.videoHeight),A=(i.videoWidth-o)/2,s=(i.videoHeight-o)/2;e.save(),e.beginPath(),e.clearRect(0,0,g,g),e.drawImage(i,A,s,o,o,0,0,g,g),e.restore();var c,r,h,d=e.getImageData(0,0,g,g);(c=f,r=f,(h=t).save(),h.beginPath(),h.fillStyle="skyblue",h.rect(0,0,c,.75*r),h.fill(),h.restore(),h.save(),h.beginPath(),h.fillStyle="green",h.rect(0,.75*r,c,.25*r),h.fill(),h.restore(),5===v&&(n.detect(d).then((function(e){var t;if(void 0!=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.bbox)){b=(e[0].bbox[0]+e[0].bbox[2]/2)/g,x=(e[0].bbox[1]+e[0].bbox[3]/2)/g;var i=e[0].bbox[2]/e[0].bbox[3];b+=(b-.5)/2,x+=(x-.5)/2,i>=.7&&!0===m&&(u.CreateShootingSound(),u.KillDuck(b*f,x*f),m=!1),i<=.6&&(m=!0)}})),v=0),y(t,b,x,f),u.CreateNewDuck(.005),u.DrawDucksAndUpdate(t),u.DeleteDucks(),10===u.escapeCount)&&(clearInterval(a),document.getElementById("scoreboard").style.display="block",document.getElementById("score").innerHTML="Congratulations! You managed to hunt down ".concat(u.killCount," duck(s)!"));!function(e,t,i,n,a){e.save(),e.scale(1,1),e.font="500 18px Verdana",e.fillStyle="white",e.fillText("BULLETS: ".concat(t?"1":"0"),5,550),e.fillText("SCORE: ".concat(i||"0"),5,570),e.fillText("LIVES: ".concat(a?n-a:n),5,590),e.restore()}(t,m,u.killCount,10,u.escapeCount)},y=function(e,t,i,n){var a=.05*n;e.save(),e.beginPath(),e.translate(Math.floor(t*f),Math.floor(i*f)),e.moveTo(0,0),e.arc(0,0,a,0,2*Math.PI),e.moveTo(0,0-a),e.lineTo(0,0+a),e.moveTo(0-a,0),e.lineTo(0+a,0),e.lineWidth=1,e.strokeStyle="red",e.stroke(),e.restore()},C=i(111),w=function(){var e=Object(o.useState)({}),t=Object(r.a)(e,2),i=(t[0],t[1]),n=Object(o.useState)(void 0),s=Object(r.a)(n,2),c=s[0],h=s[1];return Object(o.useEffect)((function(){C.a({flipHorizontal:!0,imageScaleFactor:1,maxNumBoxes:1,iouThreshold:.5,scoreThreshold:.85}).then((function(e){h(e),i(function(){var e=document.querySelector("#video");return e.width=500,e.height=500,navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){e.srcObject=t})).catch((function(e){console.log("Something went wrong!")})),e}())}))}),[]),Object(a.jsx)("div",{id:"container",className:"GameContainer",children:c?Object(a.jsxs)(A.a.Fragment,{children:[Object(a.jsx)("video",{autoPlay:!0,id:"video"}),Object(a.jsx)("button",{onClick:function(){return p(c)},className:"startButton",id:"startButton",children:"Start game"}),Object(a.jsxs)("div",{className:"canvasWrapper",children:[Object(a.jsxs)("div",{className:"scoreboard",id:"scoreboard",children:[Object(a.jsx)("span",{className:"gameOverText",children:"GAME OVER!"}),Object(a.jsx)("p",{id:"score"}),Object(a.jsx)("button",{onClick:function(){return p(c)},className:"playAgainButton",id:"playAgainButton",children:"Play again!"})]}),Object(a.jsx)("canvas",{id:"videoCanvas"}),Object(a.jsx)("canvas",{id:"gameCanvas"})]})]}):Object(a.jsx)("span",{className:"LoadingSpan",children:"Loading model"})})};var S=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(w,{})})};c.a.render(Object(a.jsx)(A.a.StrictMode,{children:Object(a.jsx)(S,{})}),document.getElementById("root"))}},[[213,1,2]]]);
//# sourceMappingURL=main.c2e9f52e.chunk.js.map